# 读书笔记1

## 第一章 基础概念

### 1.ECMAScript

由于起初网景和微软的js之争导致差异化，未解决这个问题，ECMA-262定义了js标准(只包含js语言的标准，浏览器只是宿主之一，node也是宿主)。
[版本日志](http://www.ecma-international.org/publications/standards/Ecma-262-arch.htm)

### 2.DOM

由于网景和微软浏览器支持的dom是不同形式，后来w3c对其统一标准
[版本日志](https://www.w3.org/TR/?tag=dom&status=rec)

### 3.BOM

## 第二章 在`HTML`中使用JavaScript

## 1.`<script>`

通过script来为html引入js，其属性有：

* async表示异步的立即下载js。
* charset指定字符集。
* defer指定文档解析完成后再加载js。(注意是加载，其下载根据标签位置有关)
* src指定外部js文件，当标签内部有代码时，内部代码会被忽略。
* type指定js类型，目前基本可以忽略。

## 2.标签位置

首先浏览器在加载html的过程中，会逐行加载dom，当遇到script正常情况下会停止加载，并下载加载js。为了缩短用户等待页面内容时间，通常会将script标签放置在body结束标签之前。或者使用defer来延缓加载。

## 3.嵌入代码与外部文件

推荐使用外部文件，有点如下：

* 可维护性高
* 可缓存，多页面使用同一js文件情况下，减少下载。

## 第三章 基 本 概 念

### 1.语法

* 区分大小写
* 强烈建议驼峰命名
* 严格模式，文件首行使用"use strict";也可定义函数严格模式，在其内部首行使用"use strict";
* 建议行尾使用；可以压缩代码，提高性能。

### 2.变量

使用var声明变量，当未声明直接使用时，在严格模式下报错，非严格模式会声明为全局变量。

### 3.数据类型

基础数据类型：

* Undefined 声明但未初始化值。
* Null 值为null。
* Boolean
* Number
* String

复杂类型： Object

`typeof` 操作符可得到：

* "undefined" ——如果这个值未定义；
* "boolean" ——如果这个值是布尔值；
* "string" ——如果这个值是字符串；
* "number" ——如果这个值是数值；
* "object" ——如果这个值是对象或 null ；
* "function" ——如果这个值是函数。
* `NaN`（not a number）非数值`Nan==Nan 返回false`。
* Infinity 表示无穷大

## 第四章 变量、作用域和内存问题

### 1.基本类型和引用类型的值

1. 基本类型值：简单的数据段，
2. 引用类型值：可能由多个值构成的对象。
3. 在操作基本类型值时，操作的是其保存的实际值，而引用类型操作的是其引用的值。
4. 可以为对象动态添加属性，但基本类型不能动态添加属性。
5. 在复制和传参中，基本类型是复制值，其值修改不会影响原有值。
6. 在复制和传参中，引用类型是复制引用，其值修改会影响原有值。

### 2.执行环境及作用域

1. 执行环境：也称全局执行环境，如浏览器和node等，环境不同其全局变量不同。
2. 作用域链：当代码执行会生成有全局环境到当前代码所处环境形成的链式关系。
3. 当函数中遇到为声明的变量，会顺着作用域链进行查找，直到其全局环境，若未找到则会自动创建，严格模式会报错。
4. 函数属于最小作用域，及没有块级作用域，如if和for中声明的变量会添加到最近的作用域中。

### 垃圾回收

圾收集机制的原理：找出不再继续使用的变量，然后释放其占用的内存。垃圾收集器会按照固定的时间间隔（或代码执行中预定的收集时间），周期性地执行这一操作。

垃圾收集器必须跟踪哪个变量有用哪个变量没用，对于不再有用的变量打上标记，以备将来收回其占用的内存。

### 浏览器垃圾收集两种策略

#### 标记清除

当变量进入环境，标记为不能回收，当离开环境标记为需要回收。

#### 引用计数

当变量被引用后，计数+1，当包含引用的变量重新取值后则-1。直到计数为0时，表明无法访问，即可回收。bug是循环引用。

## 第五章 引用类型

### 1.Object

创建方式：

* 构造函数：var obj=new Object();
* 字面量：var obj={};//常用

属性访问：obj['frist name']

### 2.Array

创建方式：

* 构造方式：var arr = new Array();
* 字面量: var arr=[];

关于length是可修改的，示例如下：

``` javascript
var arr=[1,2,3];
arr.length=2;
arr[2] //undefined
arr.length=4;
arr[3]//undefined
arr[9]=9;
arr.length;//10
//数组最多可以包含 42 9496 7295 个项
```

检测数据使用 Array.isArray()

栈方法：使用push和pop

队列方法：使用push和shift

强大的方法：splice(a,b,c..)

* a定义操作的开始位置。
* b定义删除数量。
* c及以后为插入内容。

### 3.Date

### 4.RegExp

### 5.Function

函数实质是对象，因此它也有其属性和方法。

函数名仅是指针。同一函数可以有多个函数名。所以同一函数名只会指向一个函数体，没有重载。

在递归使用上，不建议内部使用函数名称，可以是使用arguments.callee()。优点是如果重写函数名等不会函数不存在等问题。

### 6.内置对象

由ECMA实现提供，不依赖宿主的对象。

#### 6.1 Global

在浏览器下，window即是Global对象。

eval(string)可以执行字符串代码。相当于将string代码插入到eval所在位置，string代码拥有当前的执行环境。

#### 6.2 Math

* Math.ceil() 执行向上舍入，即它总是将数值向上舍入为最接近的整数；
* Math.floor() 执行向下舍入，即它总是将数值向下舍入为最接近的整数；
* Math.round() 执行标准舍入，即它总是将数值四舍五入为最接近的整数

Math.floor(Math.random() * 可能值的总数 + 第一个可能的值)
